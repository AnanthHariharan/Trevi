# Meta-HRL Visualization Guide

This guide explains how to use the comprehensive visualization system for the Meta-Learning Hierarchical Skill Acquisition framework.

## üöÄ Quick Start

### 1. Run the Demo
```bash
cd meta_hrl
python demo_usage.py
```

This will:
- Create sample skills and training data
- Generate static visualization plots
- Create an interactive HTML network graph
- Show real-time training simulation

### 2. Start the Interactive Dashboard

**Backend (API Server):**
```bash
cd meta_hrl
python start_dashboard.py
```

**Frontend (Web Interface):**
```bash
cd meta_hrl/frontend/frontend
npm install
npm start
```

Then open http://localhost:3000

## üìä Visualization Features

### Static Plots (Matplotlib)
Generated by running `demo_usage.py`:

1. **skill_library_overview.png**: 6-panel overview
   - Skill success rates
   - Similarity matrix heatmap
   - Composition network graph
   - Usage frequency
   - 2D skill embeddings (PCA)
   - Learning curves

2. **training_dashboard.png**: Training metrics
   - Loss curves
   - Success rates
   - Skill diversity
   - Resource usage

### Interactive Visualizations

1. **interactive_skill_network.html**: 
   - Interactive composition graph
   - Hover for skill details
   - Color-coded by success rate

2. **Web Dashboard**: Real-time interface
   - Live training monitoring
   - Skill library browser
   - Hierarchical policy status
   - Interactive charts with Plotly

## üéØ Dashboard Features

### Main Dashboard
- **Key Metrics**: Total skills, success rates, training status
- **Real-time Charts**: Loss curves, success evolution
- **System Status**: Connection status, resource usage
- **Recent Activity**: Skill updates and training progress

### Skill Library Page
- **Skill Browser**: Search and filter skills
- **Composition Graph**: Interactive network visualization
- **Skill Details**: Individual skill information
- **Similarity Analysis**: Skill relationship matrix

### Hierarchical Policy Page
- **Policy Status**: Current goal, skill sequence
- **Execution Timeline**: Skill sequence progress
- **Level Activation**: High/mid/low policy levels
- **Performance Metrics**: Success rates, adaptation times

### Training Page
- **Real-time Metrics**: Live loss and success curves
- **Training History**: Historical performance data
- **Meta-learning Progress**: Adaptation efficiency
- **Resource Monitoring**: Memory and compute usage

## üîÑ Real-time Updates

The dashboard uses WebSocket connections for live updates:

- **Training Progress**: Loss curves update every iteration
- **Skill Success Rates**: Updated after task completion
- **System Status**: Connection and health monitoring
- **New Skills**: Added skills appear immediately

## üìà Visualization Types

### Network Graphs
- **Skill Composition**: Shows how skills are combined
- **Hierarchical Structure**: Policy level relationships
- **Dependency Graphs**: Skill prerequisite chains

### Time Series
- **Training Curves**: Loss, success rate, diversity over time
- **Skill Evolution**: Individual skill performance
- **Meta-learning Progress**: Adaptation speed improvements

### Statistical Plots
- **Success Rate Distributions**: Skill performance analysis
- **Similarity Matrices**: Skill relationship heatmaps
- **Resource Usage**: System performance monitoring

### 3D Visualizations
- **Skill Embeddings**: t-SNE/PCA projections
- **Policy Landscapes**: High-dimensional policy spaces
- **Environment Rendering**: 3D task environments

## üõ† Customization

### Adding New Plots
1. Extend `SkillVisualization` class in `utils/visualization.py`
2. Add API endpoints in `frontend/backend/main.py`
3. Create React components in `frontend/frontend/src/`

### Custom Metrics
1. Update training loops to emit new metrics
2. Add API endpoints for metric collection
3. Create dashboard widgets for display

### Styling
- Modify theme in `frontend/frontend/src/App.tsx`
- Update CSS in `frontend/frontend/src/index.css`
- Customize Plotly layouts in visualization components

## üìù Example Usage

### Basic Visualization
```python
from utils.visualization import SkillVisualization
from core.skill import SkillLibrary

skill_library = SkillLibrary()
# ... add skills ...

visualizer = SkillVisualization(skill_library)
fig = visualizer.plot_skill_library_overview()
fig.savefig('skill_overview.png')
```

### Real-time Dashboard Integration
```python
import requests

# Send training metrics to dashboard
metrics = {'meta_loss': 0.5, 'success_rate': 0.8}
response = requests.post(
    'http://localhost:8000/api/training/update-metrics',
    json=metrics
)
```

### Interactive Plots
```python
# Create interactive skill network
interactive_fig = visualizer.create_interactive_skill_network()
interactive_fig.write_html('skill_network.html')
interactive_fig.show()  # Open in browser
```

## üö® Troubleshooting

### Dashboard Not Loading
1. Check backend is running: `curl http://localhost:8000/api/health`
2. Verify frontend dependencies: `cd frontend/frontend && npm install`
3. Check port conflicts: Use different ports if needed

### Missing Visualizations
1. Install required packages: `pip install plotly matplotlib seaborn`
2. Check data availability: Run demo first
3. Verify file permissions in output directory

### Performance Issues
1. Reduce update frequency for large datasets
2. Limit number of skills displayed
3. Use data sampling for large training histories

## üé® Best Practices

1. **Run Demo First**: Always test with demo data
2. **Monitor Resources**: Watch memory usage with large skill libraries
3. **Use Real-time Sparingly**: Don't update too frequently
4. **Save Important Plots**: Export key visualizations
5. **Document Custom Metrics**: Add descriptions for new metrics

## üìö Dependencies

**Python Backend:**
- FastAPI, uvicorn, websockets
- matplotlib, seaborn, plotly
- scikit-learn (for PCA/t-SNE)
- torch, numpy

**React Frontend:**
- Material-UI, Plotly.js
- axios, socket.io-client
- react-router-dom

The visualization system provides comprehensive monitoring and analysis capabilities for your meta-learning research!